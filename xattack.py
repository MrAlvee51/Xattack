# All credit goes to Shayer Mahmud Sowmik and Tool QUACK.
import os,sys,time
os.system("clear")

def jalan(z):
	for e in z + '\n':
		sys.stdout.write(e)
		sys.stdout.flush()
		time.sleep(00000.1)
		

##### LOGO #####
logo='''

\033[1;96m ------------------------
 \033[1;32m < Shayer Mahmud Sowmik >
 \033[1;96m ------------------------
\033[1;91m __   __                       _ _   
\033[1;92m \ \ / /                      (_) | 
\033[1;91m  \ V / _____      ___ __ ___  _| | __
\033[1;92m   > < / _ \ \ /\ / / '_ ` _ \| | |/ /
\033[1;91m  / . \ (_) \ V  V /| | | | | | |   < 
\033[1;92m /_/ \_\___/ \_/\_/ |_| |_| |_|_|_|\_\

\033[1;93m        Bomb it, Damn it.
\033[1;97m--------------------------------------------------
\033[1;95m
 AUTHOR     : Shayer Mahmud Sowmik
 FACEBOOK   : FACEBOOK.COM/FFSOWMIK
 YOUTUBE    : YOUTUBE.COM/XOWMIKXOSS
 GITHUB     : GITHUB.COM/XOWMIKXOSS
\033[1;32m

--------------------------------------------------
                                '''

CorrectUsername = "XowmikXoss"
CorrectPassword = "XowmikXoss"

loop = 'true'
while (loop == 'true'):
    print logo  
    print "\033[1;97mFIRST STEP OF LOGIN"
    print "\033[1;97m--------------------"
    print "\033[1;97m "
    username = raw_input("          \033[1;94mTOOL USERNAME: ")
    if (username == CorrectUsername):
    	password = raw_input("          \033[1;93mTOOL PASSWORD: ")
        if (password == CorrectPassword):
            print " First STEP Is Done. Logged in Successfully as " + username
            time.sleep(1)
            loop = 'false'
        else:
            print " Wrong Password !"
            os.system('xdg-open https://www.fb.me/ffsowmik')
            os.system("clear")
    else:
        print " Wrong Username !"
        os.system('xdg-open https://www.itztuner.blogspot.com/')
        os.system("clear")

os.system("python2 .main.py")
